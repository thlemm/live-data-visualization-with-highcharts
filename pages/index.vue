<template>
  <v-layout>
    <v-container>
      <v-row>
        <v-col cols="5">
          <v-row>
            <v-col>
              <v-card
                class="mb-5"
              >
                <v-card-title>
                  Permutationstests
                </v-card-title>
                <v-card-text>
                  <distribution :dist-data="distData" :moran-i="moranI" />
                </v-card-text>
              </v-card>
            </v-col>
            <v-col cols="4">
              <v-card class="mb-5">
                <v-card-title>
                  Ãœbersicht
                </v-card-title>
                <v-card-subtitle class="body-1">
                  I = {{ moranI.toFixed(3) }} (p = {{ pvalue }})
                </v-card-subtitle>
                <v-card-subtitle class="body-1">
                  &Psi;<sub>1</sub> = 0,00 &nbsp;&nbsp;&nbsp;&nbsp; &Psi;<sub>2</sub> = 0,00
                </v-card-subtitle>
                <v-card-subtitle class="body-1">
                  Start:<br>{{ windowStart }}
                </v-card-subtitle>
                <v-card-subtitle class="body-1">
                  Ende:<br>{{ windowEnd }}
                </v-card-subtitle>
              </v-card>
            </v-col>
          </v-row>
          <v-card>
            <v-row>
              <v-col>
                <v-card-title>
                  Moran-Scatterplot
                </v-card-title>
              </v-col>
              <v-col>
                <v-card-subtitle class="body-1">
                  b = {{ slope.toFixed(3) }}
                </v-card-subtitle>
              </v-col>
            </v-row>

            <v-card-text>
              <scatter :scatter-data="scatterData" :line-data="lineData" />
            </v-card-text>
          </v-card>
        </v-col>

        <v-col>
          <v-card>
            <v-card-title>
              Lokale erweiterte Moran-Koeffizienten
            </v-card-title>
            <v-card-text>
              <local-index-map :moran-data="moranData" :pvalues-local="pvaluesLocal" />
            </v-card-text>
          </v-card>
        </v-col>
      </v-row>
    </v-container>
  </v-layout>
</template>

<script>
import { Subject } from 'rxjs'
import moment from 'moment'
import { requestToWSEndpoint } from '@/modules/websocket'
import Distribution from '~/components/charts/distribution'
import Scatter from '~/components/charts/scatter'
import LocalIndexMap from '~/components/maps/local-index-map'

export default {
  components: { LocalIndexMap, Scatter, Distribution },
  data () {
    return {
      distData: [],
      moranI: 0,
      pvalue: 0,
      scatterData: [],
      slope: 0,
      moranData: [],
      lineData: [],
      pvaluesLocal: [],
      windowStart: '01-01-1970 00:00:00:000',
      windowEnd: '01-01-1970 04:00:00:000',
      datacollection: {},
      topic: '',
      step: 0
    }
  },
  created () {
    this.$nuxt.$on('topic-selected', (topic) => {
      console.log(topic)
      if (topic.substring(15, 17) === '5m') {
        this.step = 5
      } else {
        this.step = parseInt(topic.substring(15, 17))
      }
      console.log(this.step)
      if (topic === 'live_data') {
        this.topic = 'dashboard_preprocessed_output'
        const query = 'SELECT * FROM ' + this.topic + ';'
        console.log(query)
        this.socketRequest(query, true)
      } else {
        this.topic = topic
        const query = 'SELECT * FROM ' + this.topic + ' LIMIT 1;'
        console.log(query)
        this.socketRequest(query, false)
      }
    })
    this.$nuxt.$on('next-set', () => {
      console.log('next')
      if (this.topic === '') {
        return
      }
      const timestamp = moment(this.windowEnd, 'DD-MM-YYYY HH:mm:ss')

      const query = 'SELECT * FROM ' + this.topic + ' WHERE windowEnd = \'' + timestamp.add(this.step, 'm').format('DD-MM-YYYY HH:mm:ss:000') + '\' LIMIT 1;'
      console.log(query)
      this.socketRequest(query, false)
    })
    this.$nuxt.$on('last-set', () => {
      console.log('last')
      if (this.topic === '') {
        return
      }
      const timestamp = moment(this.windowEnd, 'DD-MM-YYYY HH:mm:ss')

      if (this.topic === '') {
        return
      }
      const query = 'SELECT * FROM ' + this.topic + ' WHERE windowEnd = \'' + timestamp.subtract(this.step, 'm').format('DD-MM-YYYY HH:mm:ss:000') + '\' LIMIT 1;'
      console.log(query)
      this.socketRequest(query, false)
    })
    this.$nuxt.$on('time-set', (time) => {
      console.log('time: ' + time)
      if (this.topic === '') {
        return
      }
      const query = 'SELECT * FROM ' + this.topic + ' WHERE windowEnd = \'' + time + '\' LIMIT 1;'
      console.log(query)
      this.socketRequest(query, false)
    })
  },

  beforeDestroy () {
    this.$nuxt.$off('topic-selected')
    this.$nuxt.$off('next-set')
    this.$nuxt.$off('last-set')
  },

  mounted () {
    // const query = 'SELECT * FROM dashboard_preprocessed_output'
    // this.socketRequest(query, true)
    this.usePlaceholder()
  },
  methods: {
    socketRequest (query, live) {
      const topicDataUrl = 'ws://localhost:3030/api/ws/v2/sql/execute'

      const websocketSubject = new Subject()
      const webSocketRequest = new WebSocket(topicDataUrl)
      requestToWSEndpoint(websocketSubject, webSocketRequest, query, live)

      websocketSubject.pipe().subscribe((data) => {
        console.log(data)
        this.windowStart = data.windowStart
        this.windowEnd = data.windowEnd
        this.moranI = data.moranI
        // this.pvalue = data.pvalue
        this.slope = data.regressionSlope
        // this.createDistData(data.distData)
        this.createScatterData(data.scatterData)
        this.moranData = data.moranData
        // this.pvaluesLocal = data.pvaluesLocal
      })
    },
    createDistData (data) {
      const tmp = []
      let i
      for (i = 0; i < data.length; i++) {
        tmp.push({ x: i, y: data[i], id: 'id-' + i })
      }
      this.distData = tmp
    },
    createScatterData (data) {
      let maxX = 0
      let minX = null
      const scatterData = []
      let i
      for (i = 0; i < data.length; i++) {
        scatterData.push({ x: data[i][0], y: data[i][1], id: 'id-' + i })
        if (data[i][0] > maxX) {
          maxX = data[i][0]
        }
        if (data[i][1] < minX || minX === null) {
          minX = data[i][1]
        }
      }
      this.scatterData = scatterData

      const lineData = []
      lineData.push({ x: minX, y: minX * this.slope, id: 'id-0' })
      lineData.push({ x: maxX, y: maxX * this.slope, id: 'id-1' })
      this.lineData = lineData
    },
    usePlaceholder () {
      const data = { windowStart: '26-01-2018 09:00:00:000', windowEnd: '26-01-2018 10:00:00:000', distData: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 20, 30, 20, 10, 5, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], moranI: 0.6803234166878209, pvalue: 0.01, pvaluesLocal: [[1, 0.03], [2, 0.06], [3, 0.03], [4, 0.04], [5, 0.01], [6, 0.01], [7, 0.03], [8, 0.03], [9, 0.02], [10, 0.03], [11, 0.01], [12, 0.03], [13, 0.03], [14, 0.02], [15, 0.02], [16, 0.01], [17, 0.03], [18, 0.01], [19, 0.02], [20, 0.01], [21, 0.01], [22, 0.01], [23, 0.01], [24, 0.06], [25, 0.03], [26, 0.01], [27, 0.01], [28, 0.03], [29, 0.03], [30, 0.01], [31, 0.02], [32, 0.03], [33, 0.03], [34, 0.02], [35, 0.01], [36, 0.03], [37, 0.02], [38, 0.03], [39, 0.01], [40, 0.03], [41, 0.04], [42, 0.04], [43, 0.01], [44, 0.01], [45, 0.04], [46, 0.01], [47, 0.03], [48, 0.01], [49, 0.03], [50, 0.03], [51, 0.03], [52, 0.03], [53, 0.07], [54, 0.03], [55, 0.03], [56, 0.03], [57, 0.03], [58, 0.01], [59, 0.03], [60, 0.03], [61, 0.01], [62, 0.03], [63, 0.03], [64, 0.01], [65, 0.03], [66, 0.03], [67, 0.03], [68, 0.01], [69, 0.03], [70, 0.07], [71, 0.01], [72, 0.01], [73, 0.03], [74, 0.04], [75, 0.03], [76, 0.01], [77, 0.02], [78, 0.03], [79, 0.01], [80, 0.03], [81, 0.03], [82, 0.02], [83, 0.03], [84, 0.01], [85, 0.02], [86, 0.01], [87, 0.04], [88, 0.04], [89, 0.03], [90, 0.01], [91, 0.01], [92, 0.03], [93, 0.04], [94, 0.01], [95, 0.01], [96, 0.02], [97, 0.03], [98, 0.03], [99, 0.01], [100, 0.01], [101, 0.01], [102, 0.01], [103, 0.03], [104, 0.01], [105, 0.03], [106, 0.03], [107, 0.01], [108, 0.03], [109, 0.01], [110, 0.01], [111, 0.03], [112, 0.03], [113, 0.01], [114, 0.03], [115, 0.01], [116, 0.03], [117, 0.01], [118, 0.01], [119, 0.02], [120, 0.03], [121, 0.03], [122, 0.03], [123, 0.03], [124, 0.04], [125, 0.03], [126, 0.03], [127, 0.03], [128, 0.03], [129, 0.04], [130, 0.03], [131, 0.03], [132, 0.07], [133, 0.03], [134, 0.03], [135, 0.03], [136, 0.01], [137, 0.01], [138, 0.09], [139, 0.01], [140, 0.01], [141, 0.01], [142, 0.01], [143, 0.01], [144, 0.03], [145, 0.03], [146, 0.03], [147, 0.02], [148, 0.04], [149, 0.02], [150, 0.03], [151, 0.01], [152, 0.03], [153, 0.02], [154, 0.01], [155, 0.01], [156, 0.01], [157, 0.03], [158, 0.03], [159, 0.03], [160, 0.03], [161, 0.01], [162, 0.01], [163, 0.01], [164, 0.01], [165, 0.03], [166, 0.04], [167, 0.03], [168, 0.03], [169, 0.03], [170, 0.01], [171, 0.03], [172, 0.01], [173, 0.03], [174, 0.01], [175, 0.03], [176, 0.01], [177, 0.01], [178, 0.03], [179, 0.03], [180, 0.03], [181, 0.03], [182, 0.03], [183, 0.02], [184, 0.02], [185, 0.03], [186, 0.01], [187, 0.01], [188, 0.02], [189, 0.02], [190, 0.03], [191, 0.03], [192, 0.03], [193, 0.01], [194, 0.04], [195, 0.01], [196, 0.01], [197, 0.03], [198, 0.03], [199, 0.09], [200, 0.03], [201, 0.01], [202, 0.06], [203, 0.03], [204, 0.01], [205, 0.03], [206, 0.01], [207, 0.03], [208, 0.02], [209, 0.04], [210, 0.03], [211, 0.03], [212, 0.03], [213, 0.03], [214, 0.01], [215, 0.03], [216, 0.03], [217, 0.03], [218, 0.01], [219, 0.03], [220, 0.03], [221, 0.01], [222, 0.01], [223, 0.06], [224, 0.06], [225, 0.01], [226, 0.03], [227, 0.03], [228, 0.03], [229, 0.01], [230, 0.01], [231, 0.03], [232, 0.04], [233, 0.01], [234, 0.01], [235, 0.01], [236, 0.01], [237, 0.01], [238, 0.01], [239, 0.01], [240, 0.02], [241, 0.01], [242, 0.03], [243, 0.03], [244, 0.03], [245, 0.01], [246, 0.01], [247, 0.03], [248, 0.03], [249, 0.01], [250, 0.03], [251, 0.01], [252, 0.03], [253, 0.02], [254, 0.03], [255, 0.03], [256, 0.03], [257, 0.03], [258, 0.01], [259, 0.02], [260, 0.03], [261, 0.04], [262, 0.01], [263, 0.01]], scatterData: [[-251.65231721499734, -251.65231721499734], [-351.2167300380228, 183.89159504330576], [-121.68978176787876, -341.87816245891236], [-212.81536524421531, 46.945729220028], [-351.2167300380228, -351.2167300380228], [-351.2167300380228, -351.2167300380228], [-357.08988205949674, -271.2254947589047], [-336.4397974582301, -202.18503148913865], [-351.2167300380228, -340.75496930093925], [-100.19008116448327, -316.7966699662543], [-351.2167300380228, -361.49185704554907], [-218.91098716504936, -73.09831862905506], [220.5102127577032, 187.9225821462486], [-433.4300200040307, -270.0090735094681], [-402.79684870802174, -294.0810609797371], [-409.33667113330984, -344.7064926036842], [-268.1401549957131, -328.39272781062425], [-548.9517220284679, -363.1003508339245], [-351.2167300380228, -341.7405593376734], [-391.58849626633287, -370.5598546925982], [-375.90782004087697, -367.8052452674854], [-390.47036437062434, -357.2535414338197], [-351.2167300380228, -351.2167300380228], [-147.78214952713404, 580.0335876835721], [-106.95234993795565, -230.42209929658367], [-441.31442889438694, -313.1212210799053], [-351.2167300380228, -351.2167300380228], [-278.5270849174466, -269.2374829821608], [-121.68978176787876, -336.1681014436756], [-351.2167300380228, -351.2167300380228], [-351.2167300380228, -342.09373901739525], [-351.2167300380228, -293.8349929704867], [-78.0867004088934, -183.3724889534146], [-389.86633572558117, -287.45111738427715], [-391.58849626633287, -369.4995755504218], [-363.6498473848535, -249.46162868950944], [-395.5176379503927, -307.83188967426855], [-351.2167300380228, -300.94729321706774], [-463.3383451132595, -447.6378292034063], [-234.95830658457388, -282.6731289647484], [-48.86047266375386, 263.57180677775966], [-94.43542090839087, -132.59484415252842], [2094.9064570309797, 1028.2594753627932], [-351.2167300380228, -351.2167300380228], [-189.8309989239873, 115.32512594651192], [-351.2167300380228, -351.2167300380228], [-317.5262073145877, -322.43485303648583], [1050.4113331009453, 1273.3766939676016], [-305.4602890275098, -348.8638468631726], [145.6451068408385, 699.9885045403064], [-351.2167300380228, -274.70774728130806], [-138.53997255222006, -202.61693032551182], [-391.58849626633287, 996.422027192635], [-390.47036437062434, -264.27154800252384], [-260.57518676199214, -229.06478961305442], [-182.18806237285335, -400.74716193042275], [-351.2167300380228, -285.09237173804183], [-351.2167300380228, -351.2167300380228], [-351.2167300380228, -281.83856263559744], [-121.68978176787876, -312.5677150455179], [-371.19217375769904, -350.42853805122945], [-287.6405210583445, -341.2673548584527], [-314.00199540145684, -328.3793487117247], [-351.2167300380228, -378.9309304305029], [-133.22082804081003, -159.88334127389547], [-147.6789298654628, -226.99731226463865], [-260.57518676199214, -366.6829413343205], [659.9870618372375, 728.7658321930531], [-317.5262073145877, -273.7963912804957], [-195.95080276746208, 641.2111540452375], [-363.30124944848365, -380.93959068089794], [-456.6261726134054, -385.72969524707156], [-317.5262073145877, -330.7762609233833], [-35.438489150477366, -67.97990745669473], [104.47556046555428, 1008.1390765057669], [-350.93659402839415, -370.61743131792645], [-317.5262073145877, -364.5806067775833], [-336.9215314219007, -303.1807837348491], [547.6523559365558, 309.0225492928714], [-129.42236500174346, -302.9895694954815], [-351.2167300380228, -298.57323583930696], [-406.03941282370135, -286.35225294340256], [-242.05632734099368, -266.4073133325241], [-351.2167300380228, -351.2167300380227], [-351.2167300380228, -331.18807616677555], [-351.2167300380228, -405.1103323172903], [82.02437233472084, -81.80122552962399], [-6.383848692044598, -91.3219605008099], [-239.0148684490027, -307.4192360942456], [342.7500933925852, 801.9430439925543], [-466.59207170121834, -345.7345128336411], [-266.0132930977874, -324.4829246144027], [-383.48423635627404, 15.33014363887662], [-351.2167300380228, -376.0337713432176], [-469.38564961180896, -339.95971850090245], [-351.2167300380228, -332.1752832333912], [-306.81538488327, -268.54770401837374], [-260.57518676199214, -318.5074977983356], [-351.2167300380228, -351.2167300380228], [1771.4610450679718, 1825.3313559583269], [-403.953590512656, -351.2167300380228], [-394.6148793358159, -347.329820834088], [-351.2167300380228, -285.0638586015361], [-351.2167300380228, -351.2167300380228], [-351.2167300380228, -210.4593716643813], [-290.2588426254609, -308.56051216112326], [795.6494445315785, 892.7875208619616], [-336.4397974582301, -277.34737965219267], [-351.2167300380228, -351.2167300380228], [-351.2167300380228, -351.2167300380228], [-351.2167300380228, -276.4930635876292], [-319.22865162783944, -176.78864967918105], [637.4729468912341, 594.5403999678091], [193.1538294661566, 346.3311678565063], [-351.2167300380228, -351.2167300380228], [-283.3300625967026, -139.863869657666], [-405.1103323172903, -351.2167300380228], [-351.2167300380228, -351.21673003802283], [-268.8672240813103, -410.31961640974225], [-351.2167300380228, -188.9307700571857], [-351.2167300380228, -271.1755224317788], [-351.2167300380228, -210.26810084213244], [-351.2167300380228, -279.13241153193246], [-121.68978176787876, -83.75679919287114], [178.32047874421082, 302.8532825596336], [-351.2167300380228, -244.8315305281161], [-124.62379978505002, -357.050014611937], [-351.2167300380228, -255.93027220092952], [-139.03548742134927, 203.35161141604257], [-188.38454451702594, -253.7273263300334], [-151.33214605927853, -291.6731704389322], [718.9999201246343, -257.49296000856884], [-351.2167300380228, -288.30895228732277], [-223.5022766347169, -337.8328327360255], [-230.74369629423285, -341.9715854578609], [-403.953590512656, -385.6462351665432], [400.4239803190778, 786.1703932422884], [3376.9691564435716, -261.1407703443974], [-351.2167300380228, -371.5911427844645], [1138.8703351921195, 702.0190680604609], [1728.1282687883834, 1388.3637814849244], [869.4982625475013, 1353.5352791191106], [397.3938516309051, 867.9420012660943], [213.71342240206673, 188.78073553357066], [-125.99922576135586, -349.5887373746171], [-278.49565058921127, -296.9664552711411], [-391.58849626633287, -283.82428931179084], [49.337511947347046, 20.970141013684497], [-336.4397974582301, -341.3288159741596], [-415.08258564554535, -263.47757304016307], [193.60276454420617, 826.1123309928914], [-157.2089122890707, -86.53508858649768], [-351.2167300380228, -339.20201178531454], [-351.2167300380228, -371.0327940159771], [-415.08258564554535, -404.39673607768265], [-351.2167300380228, -351.2167300380228], [-357.22413423089404, -233.42067378004577], [160.42154942835722, 397.60145254715985], [-301.27603388055695, -297.9797742273761], [-289.6048164849981, -356.86406688520435], [4069.548965883474, 2177.9307710672674], [2035.0333013671539, 1976.4435855092106], [3026.641623535904, 2086.202087647132], [1314.0862107754028, 1999.9756305213114], [-146.3385711075607, -342.56967464452737], [80.48560182285662, -112.07173884708736], [-351.2167300380228, -307.4343123742842], [-131.58766329056098, -349.084326904047], [-157.35754613851142, -361.3816754973366], [2086.626416258593, 1493.0106906731603], [-351.2167300380228, -311.42992200993467], [-351.2167300380228, -351.2167300380228], [-289.6048164849981, -276.3191219632771], [-317.5262073145877, -398.8380816817739], [-351.2167300380228, -297.37544179876966], [-351.2167300380228, -351.2167300380228], [-351.2167300380228, -359.7055013684187], [-319.5849055761629, -310.75848370597004], [-298.80119376133376, -327.4312106914148], [-376.86123712133866, -247.77826954414678], [-431.0746599808575, -223.46398434374342], [-351.2167300380228, -269.06986902618473], [-351.2167300380228, -329.42673902009847], [-351.2167300380228, -314.3546148725332], [-351.2167300380228, -277.4924997070435], [1024.218534754321, 1101.374677765572], [-351.2167300380228, -351.2167300380228], [-391.2481106028404, -303.248220562523], [-365.58053555043955, -303.9788017459266], [-121.68978176787876, -306.04141290156053], [-260.57518676199214, -293.9363970005136], [-354.6582905197001, -308.68229712870277], [-422.9749190768583, -295.0937075633886], [-233.0992967201885, -35.438489150477366], [-518.556030428909, -303.6330914984004], [-504.7521262677316, -348.36656412583557], [-355.99875097557504, -274.77121240644595], [-121.68978176787876, -314.2887954127213], [-351.2167300380228, 3376.9691564435716], [-259.83114695917146, -312.83358154799794], [-351.2167300380228, -378.1635311776565], [-415.08258564554535, 229.4461204817255], [-351.2167300380228, -87.69775215313277], [-351.2167300380228, -351.2167300380228], [-240.78052603023312, -310.33265851996094], [-351.2167300380228, -351.2167300380228], [-347.6058176269805, -191.25611438798535], [-351.2167300380228, -334.70664740848804], [-92.41982625354028, 168.7180267536322], [-317.5262073145877, -315.12912498953995], [231.38010443965345, 311.2627403377794], [-121.68978176787876, -307.34715153909286], [-351.2167300380228, -252.66784618527817], [-351.2167300380228, -351.2167300380228], [-332.4770064471936, -196.26759844502357], [-95.98408953780036, -140.49486881624762], [-391.58849626633287, -275.7203263258716], [-547.3842591549243, -264.8862014734647], [-367.35746866111975, -121.16532830143653], [-274.45043305797304, -344.7752762706531], [-351.2167300380228, -351.2167300380228], [-548.9517220284679, -407.13746957082685], [-105.56886921694353, 316.3328296860302], [-155.33824190179342, 382.7276038857492], [-377.17540486006783, -346.5166741854569], [-281.8017941868535, -256.42782229902195], [-216.9831633645375, -347.5595159143505], [-251.26121387332014, -324.7709418492839], [856.1356058160559, 1092.4955896640292], [2833.736029398581, 2246.4298356727395], [659.8632307386835, 97.78412800445975], [-253.86870910199735, 48.58587592892505], [417.7439540807756, 1344.5548259402203], [1418.5889777546613, 877.2379626581984], [-436.82506579874996, -313.04185155824706], [2697.3129124744432, 1241.09218136172], [1650.2802642012894, 2073.0263615021536], [531.2126854748288, 1231.574174716759], [1406.2133025750918, 973.2528141710537], [-351.2167300380228, -317.569169251484], [-351.2167300380228, -379.2197365903415], [-285.8467569842499, -305.1222193216732], [-368.7165837597655, -248.75113390915797], [-167.94727577553638, -334.4211254648303], [-351.2167300380228, -351.2167300380228], [482.6505708818738, 504.1162628018446], [-383.8141670207346, -262.4327413247441], [-351.2167300380228, -220.11076263950756], [269.4476987253173, 512.9564196449203], [-317.5262073145877, -292.23734577323944], [-351.2167300380228, -351.2167300380227], [-121.68978176787876, -352.9038420275412], [-351.2167300380228, -324.74876472703073], [-351.2167300380228, -307.34715153909286], [-224.1549343566186, -244.78783450279772], [-285.7124868788103, -283.75803283756903], [-121.68978176787876, -290.9123306911841], [-351.2167300380228, -349.51967838409837], [-317.5262073145877, -351.2167300380228], [-163.33021885415178, -287.46890714442793], [122.81550286511171, 107.44719228674553], [713.243695021017, 899.7861301921125], [627.6703563223931, 1276.4061543883035]], regressionSlope: 0.6803234166878219, moranData: [[1, 0.14788763903577476], [2, -0.1508228291745071], [3, 0.0971528357372823], [4, -0.023330770327353586], [5, 0.2880583034003218], [6, 0.2880583034003218], [7, 0.2261715962538911], [8, 0.15884968979138564], [9, 0.27947785494566496], [10, 0.0741199887015844], [11, 0.29648568000248543], [12, 0.03736843890484245], [13, 0.0967693196510813], [14, 0.2732922742629701], [15, 0.2766197146104568], [16, 0.32950357059818786], [17, 0.20562948861960184], [18, 0.46546907075822336], [19, 0.28028620878974053], [20, 0.3388584348996777], [21, 0.32287118457857006], [22, 0.32575765387664757], [23, 0.2880583034003218], [24, -0.20017283043590786], [25, 0.05754988610423663], [26, 0.322693811826199], [27, 0.2880583034003218], [28, 0.1751188771266345], [29, 0.09553018568010051], [30, 0.2880583034003218], [31, 0.2805758770504898], [32, 0.24099538067437898], [33, 0.033438074410537255], [34, 0.26170362938998604], [35, 0.33788886270742624], [36, 0.21184448934056116], [37, 0.2843213496145041], [38, 0.24682869374600291], [39, 0.4843452359673594], [40, 0.15509769296511627], [41, -0.030073683564854087], [42, 0.02924095589624383], [43, 5.030340275825947], [44, 0.2880583034003218], [45, -0.051123558876310315], [46, 0.2880583034003218], [47, 0.2390845785756191], [48, 3.1235344764917548], [49, 0.24885176876148765], [50, 0.23807665640078238], [51, 0.22530773976573137], [52, 0.06555122874999417], [53, -0.9111780576289306], [54, 0.2409730610874845], [55, 0.13938672150470913], [56, 0.1704984285697883], [57, 0.2338249231645187], [58, 0.2880583034003218], [59, 0.2311562384195261], [60, 0.0888235728722346], [61, 0.303758392593517], [62, 0.22923177711832673], [63, 0.24078989274566373], [64, 0.31078872841250754], [65, 0.049739950938082825], [66, 0.0782833243288768], [67, 0.22312784566599195], [68, 1.1231905292585784], [69, 0.2030192896591588], [70, -0.29341217021465044], [71, 0.32318635053183603], [72, 0.4113143701879203], [73, 0.24526971014742394], [74, 0.005625819260303847], [75, 0.24596038636757436], [76, 0.3037277736131282], [77, 0.27033554191611714], [78, 0.23853957740581705], [79, 0.39520746511134786], [80, 0.09157291052492907], [81, 0.24488155717213086], [82, 0.271518111074888], [83, 0.15058877156890166], [84, 0.28805830340032174], [85, 0.2716313522897663], [86, 0.3322603538977933], [87, -0.01566869165727793], [88, 0.0013614064990782068], [89, 0.17158762587577242], [90, 0.6418759662218841], [91, 0.37671255821126287], [92, 0.20156967493502959], [93, -0.013728520882612068], [94, 0.3084125582019544], [95, 0.3726381173644219], [96, 0.27244103237728184], [97, 0.19241041879130635], [98, 0.19381292064910285], [99, 0.2880583034003218], [100, 7.550980156720142], [101, 0.3313116260804166], [102, 0.32007041814594733], [103, 0.23380153747407742], [104, 0.2880583034003218], [105, 0.1726129889364217], [106, 0.20914901045250392], [107, 1.6588223696394628], [108, 0.21790211123799824], [109, 0.2880583034003218], [110, 0.2880583034003218], [111, 0.22677200710338385], [112, 0.1317911508371751], [113, 0.8850608654017559], [114, 0.15621578245147083], [115, 0.2880583034003218], [116, 0.09253972521759866], [117, 0.33226035389779335], [118, 0.28805830340032185], [119, 0.25762627348868916], [120, 0.15495582194190288], [121, 0.2224107060815054], [122, 0.17245611386802442], [123, 0.2289367277043553], [124, 0.023801492599994582], [125, 0.12611406223370142], [126, 0.20080408839065864], [127, 0.10391064776350505], [128, 0.20990697109161358], [129, -0.06602422166314215], [130, 0.1116201291595482], [131, 0.1030760295807666], [132, -0.4323387972525615], [133, 0.23646307407400421], [134, 0.17632496822964955], [135, 0.18426798016758814], [136, 0.36378984922211954], [137, 0.7351344428855402], [138, -2.0593576772896536], [139, 0.3047688364318278], [140, 1.8670381727604444], [141, 5.602853388175232], [142, 2.7483263807665077], [143, 0.80545606656622], [144, 0.09421487607553192], [145, 0.10286208360892767], [146, 0.19313270366270294], [147, 0.25954310280721254], [148, 0.0024160649422247204], [149, 0.26817008230042444], [150, 0.2553925215220587], [151, 0.37349145264091577], [152, 0.03176869781672922], [153, 0.27820416189819763], [154, 0.3043108941266912], [155, 0.3919874505084591], [156, 0.2880583034003218], [157, 0.19471980182288076], [158, 0.14895005817413104], [159, 0.2096434897658707], [160, 0.24134516851344742], [161, 20.69761753557361], [162, 9.392602674700884], [163, 14.745088523468883], [164, 6.1373172042071635], [165, 0.1170678745601419], [166, -0.021064168212472596], [167, 0.25214916846356794], [168, 0.1072693214624892], [169, 0.13279560742497043], [170, 7.275077545393907], [171, 0.25542625760613485], [172, 0.2880583034003218], [173, 0.18687307364898456], [174, 0.2957373676598324], [175, 0.24389915943981658], [176, 0.2880583034003218], [177, 0.2950205602014782], [178, 0.231920565191037], [179, 0.2284716985125831], [180, 0.21805933996253835], [181, 0.2249520941171723], [182, 0.220683707064406], [183, 0.270186751999419], [184, 0.2578250102620119], [185, 0.22759171712370188], [186, 2.634254472961439], [187, 0.2880583034003218], [188, 0.27706426969153003], [189, 0.2595113587926646], [190, 0.08696896842600892], [191, 0.17886132031910187], [192, 0.2556535619979106], [193, 0.29147718938022654], [194, 0.019290619274336365], [195, 0.36768405682638655], [196, 0.4106242847897405], [197, 0.22842819732632388], [198, 0.08931265891681536], [199, -2.769697234340288], [200, 0.18981677281353962], [201, 0.31015932864905754], [202, -0.22240535536718897], [203, 0.07192728459865357], [204, 0.2880583034003218], [205, 0.1744933373461263], [206, 0.2880583034003218], [207, 0.15525027309078948], [208, 0.2745171876603397], [209, -0.03641301528026944], [210, 0.23366740082686469], [211, 0.16818341148485635], [212, 0.08734002520967594], [213, 0.20723121899137661], [214, 0.2880583034003218], [215, 0.15238430274723458], [216, 0.03149123704773275], [217, 0.25213243438450506], [218, 0.338595863479454], [219, 0.10394347822799078], [220, 0.22096833523345094], [221, 0.2880583034003218], [222, 0.5219215547347834], [223, -0.0779848325832103], [224, -0.13883474924267036], [225, 0.30520912290848307], [226, 0.16874810566191958], [227, 0.17611049115236457], [228, 0.19056038718576557], [229, 2.1841992815582443], [230, 14.865593701915149], [231, 0.15067885261954006], [232, -0.02880376239134701], [233, 1.3116522156149741], [234, 2.9060561871399284], [235, 0.3193301778227176], [236, 7.817454807498442], [237, 7.989002166794177], [238, 1.5277736635397998], [239, 3.196000792533752], [240, 0.260461499362313], [241, 0.3110255992825417], [242, 0.20367471259499323], [243, 0.21418435687488044], [244, 0.13115857090741143], [245, 0.2880583034003218], [246, 0.568189940394353], [247, 0.23521717310671567], [248, 0.18052879439775912], [249, 0.32276390139159844], [250, 0.21669320794655592], [251, 0.28805830340032174], [252, 0.1002860456162597], [253, 0.26635000613009346], [254, 0.2520776815434959], [255, 0.12813510882569418], [256, 0.1893247509789505], [257, 0.08266967879525576], [258, 0.2866664283032578], [259, 0.2604262631631382], [260, 0.10964464610418423], [261, 0.03081614226181677], [262, 1.4986742447204515], [263, 1.8708997457625032]] }
      this.windowStart = data.windowStart
      this.windowEnd = data.windowEnd
      this.moranI = data.moranI
      this.pvalue = data.pvalue
      this.slope = data.regressionSlope
      this.createDistData(data.distData)
      this.createScatterData(data.scatterData)
      this.moranData = data.moranData
      this.pvaluesLocal = data.pvaluesLocal
    }
  }
}
</script>
